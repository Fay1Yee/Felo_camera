# AI 相机界面设计文档

## 📱 界面概览

AI 相机是宠物档案 App 的核心功能之一，提供智能识别和拍摄功能。界面采用全屏沉浸式设计，符合移动端标准（9:16 竖屏比例），延续 Nothing OS 极简风格。

---

## 🎯 功能特性

### 四种识别模式

#### 1. 🐾 宠物识别模式
**用途**：识别宠物品种、情绪状态
**颜色**：墨绿色系 `#2F5233` / `#E8F5E9`
**AI 功能**：
- 自动识别宠物品种（如：金毛犬、波斯猫）
- 检测情绪状态（放松、警觉、兴奋）
- 识别置信度显示
- 实时框选宠物位置

**交互提示**：
- 点阵虚线边框高亮
- 顶部显示品种标签
- 底部显示情绪状态
- 角标显示识别置信度

---

#### 2. 📦 出行箱识别模式
**用途**：扫描智能出行箱设备状态
**颜色**：深灰色系 `#37474F` / `#FFF8E1`
**AI 功能**：
- 识别出行箱类型
- 读取设备电量
- 检测设备状态（在线/离线）
- 扫描二维码绑定

**交互提示**：
- 黄色点阵边框
- 显示设备型号
- 实时电量百分比
- 状态指示灯效果

---

#### 3. 💊 健康标记模式
**用途**：记录宠物健康症状和体征
**颜色**：墨绿色系 `#2F5233` / `#E8F5E9`
**AI 功能**：
- 识别身体部位（眼部、耳朵、皮肤等）
- 标记症状区域
- 添加健康笔记
- 对比历史照片

**交互提示**：
- 精确定位框
- 部位名称标签
- "可添加标记" 提示
- 症状描述入口

---

#### 4. 📸 普通拍摄模式
**用途**：拍摄普通照片保存到档案
**颜色**：中灰色系 `#78909C` / `#F5F5F0`
**AI 功能**：
- 无 AI 识别
- 纯拍摄功能
- 网格线辅助构图
- 自动保存到相册

**交互提示**：
- 简洁拍摄界面
- 九宫格辅助线
- 拍摄倒计时（可选）

---

## 🎨 界面布局

### 顶部控制栏（固定）
```
┌─────────────────────────────────┐
│ [X]     [宠物识别 💚]    [⚡]  │  高度: 56px
└─────────────────────────────────┘
```

**元素**：
- **左侧**：关闭按钮（返回）
- **中间**：当前模式指示器（圆角徽章）
- **右侧**：闪光灯开关

**样式**：
- 半透明黑色背景 `bg-black/50`
- 毛玻璃模糊效果 `backdrop-blur-md`
- 图标圆形按钮 `w-10 h-10`

---

### 中间相机预览区（主区域）

**全屏显示**：
- 渐变背景模拟相机预览
- 点阵网格叠加层（Nothing OS 风格）
- 十字参考线（中心对齐辅助）
- AI 识别结果叠加层

**AI 识别提示框结构**：
```
┌─────────────────────────┐
│  ✨ 金毛犬  [94%]       │  标签栏
├─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─┤
│                         │
│    [识别区域高亮]       │  点阵边框
│                         │
├─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─┤
│  情绪：放松              │  详情栏
└─────────────────────────┘
```

**视觉特征**：
- **边框**：2px 点阵虚线，动态颜色
- **角标**：四角加粗实线标记（3px）
- **光晕**：柔和阴影扩散 `box-shadow`
- **动画**：渐显 + 缩放入场效果

---

### 底部控制区（固定）

#### 模式切换栏
```
┌─────────────────────────────────────┐
│  [💚宠物] [📦箱子] [💊健康] [📸拍摄] │
└─────────────────────────────────────┘
```

**交互**：
- 横向滑动/点击切换
- 当前模式放大 `scale-105`
- 未选中模式透明度降低 `opacity-60`
- 平滑过渡动画

**样式**：
- 圆角卡片 `rounded-2xl`
- 主题色边框（选中状态）
- 图标 + 文字垂直排列

---

#### 拍摄按钮区
```
┌─────────────────────────────────┐
│   [<]      ⦿ 拍摄       [>]     │
└─────────────────────────────────┘
```

**核心拍摄按钮**：
- **外环**：20px 圆环，主题色边框
- **内环**：16px 实心圆，主题色填充
- **图标**：相机 icon，白色
- **光晕**：点阵网格扩散效果

**左右切换按钮**：
- 快速切换上/下一个模式
- 半透明白色背景
- Chevron 图标指示

---

## 🎭 交互动画

### 模式切换动画
1. **入场**：选中模式卡片放大 + 边框显现
2. **提示**：顶部模式描述淡入，3秒后淡出
3. **AI重置**：清除上一模式的识别结果
4. **颜色过渡**：拍摄按钮主题色平滑变化

```css
transition: all 300ms ease-in-out
```

---

### AI 识别动画
1. **检测阶段**：无提示（1秒后触发）
2. **高亮入场**：
   - 识别框淡入 + 缩放 `animate-in fade-in zoom-in-95`
   - 边框闪烁动画 `animate-pulse`
   - 标签从上方滑入
3. **持续状态**：边框保持柔和呼吸效果

---

### 拍摄动画
1. **点击拍摄按钮**
2. **全屏遮罩**：黑色半透明层 `bg-black/80`
3. **分析提示**：
   - 黄色圆形 icon 放大 + 脉冲
   - "AI 分析中..." 文字
   - 模式名称副标题
4. **完成**：1.5秒后自动关闭或跳转结果页

---

## 📐 尺寸适配

### 移动端标准
- **设计基准**：390 × 844px (iPhone 14)
- **宽高比**：9:16 竖屏
- **安全区域**：
  - 顶部：44px (状态栏)
  - 底部：34px (Home Indicator)

### 触控区域
- **最小点击区域**：44 × 44px (iOS 标准)
- **按钮间距**：至少 8px
- **拍摄按钮**：80 × 80px (加大目标)

### 手势支持
- **左右滑动**：切换模式（可选）
- **双击**：放大/缩小预览
- **捏合**：调整缩放倍率
- **避免冲突**：底部上滑手势不触发系统导航

---

## 🎨 视觉规范

### 配色方案
| 模式 | 主色 | 背景色 | 用途 |
|-----|------|--------|------|
| 宠物识别 | `#2F5233` | `#E8F5E9` | 健康、自然 |
| 出行箱 | `#37474F` | `#FFF8E1` | 科技、实用 |
| 健康标记 | `#2F5233` | `#E8F5E9` | 医疗、专业 |
| 普通拍摄 | `#78909C` | `#F5F5F0` | 中性、简洁 |

### 字体规范
- **模式名称**：13px, Medium (Caption)
- **识别标签**：13px, Medium
- **置信度徽章**：10px, Bold
- **描述文字**：13px, Regular

### 图标规范
- **尺寸**：24px × 24px (主图标)
- **描边**：1.5px
- **圆角**：跟随 Nothing OS 风格
- **颜色**：随模式动态变化

---

## 💡 用户体验优化

### 首次使用引导
1. 打开相机时，显示 "向左右滑动切换模式" 提示
2. 3秒后自动隐藏
3. 每次切换模式时，短暂显示模式描述

### AI 识别反馈
- **识别成功**：绿色边框 + 标签
- **识别中**：边框呼吸动画
- **无结果**：无提示（保持界面简洁）
- **低置信度**：显示但降低饱和度

### 错误处理
- **相机权限**：请求权限对话框
- **网络错误**：本地识别降级
- **识别失败**：静默处理，允许手动拍摄

### 性能优化
- **流畅帧率**：60fps 预览
- **AI 延迟**：<2秒响应
- **电池友好**：闲置时降低识别频率
- **内存控制**：及时释放识别资源

---

## 🔧 技术实现

### 核心组件
```tsx
<AICameraInterface 
  onClose={() => {}}      // 关闭回调
  onCapture={(mode, results) => {}}  // 拍摄回调
/>
```

### Props 说明
- **onClose**: 用户点击关闭按钮的回调
- **onCapture**: 拍摄完成回调，返回模式和识别结果

### 识别结果数据结构
```typescript
interface DetectionResult {
  type: 'pet' | 'carrier' | 'health';
  label: string;           // 识别标签
  confidence: number;      // 置信度 0-1
  position: {              // 位置信息（百分比）
    x: number;
    y: number;
    width: number;
    height: number;
  };
  details?: string;        // 额外详情
}
```

---

## 📋 使用示例

### 宠物识别场景
```
用户操作：打开相机 → 对准宠物 → 等待1秒

AI 响应：
┌─────────────────────────┐
│  ✨ 金毛犬  [94%]       │
│  ╭─ ─ ─ ─ ─ ─ ─ ─╮    │
│  ┆  [宠物区域]   ┆    │
│  ╰─ ─ ─ ─ ─ ─ ─ ─╯    │
│  情绪：放松              │
└─────────────────────────┘

用户操作：点击拍摄按钮

结果：保存到档案 + 自动标记品种
```

---

### 出行箱扫描场景
```
用户操作：切换到"出行箱"模式 → 对准设备

AI 响应：
┌─────────────────────────┐
│  ✨ 智能出行箱  [89%]   │
│  ╭─ ─ ─ ─ ─ ─ ─ ─╮    │
│  ┆  [设备区域]   ┆    │
│  ╰─ ─ ─ ─ ─ ─ ─ ─╯    │
│  电量：85%              │
└─────────────────────────┘

用户操作：点击拍摄

结果：自动绑定设备 + 跳转设备详情页
```

---

### 健康标记场景
```
用户操作：切换到"健康标记"模式 → 对准眼部

AI 响应：
┌─────────────────────────┐
│  ✨ 眼部区域  [91%]     │
│  ╭─ ─ ─ ─╮             │
│  ┆ [眼部] ┆             │
│  ╰─ ─ ─ ─╯             │
│  可添加健康标记          │
└─────────────────────────┘

用户操作：点击拍摄

结果：打开健康标记编辑器
```

---

## 🎯 设计目标达成

✅ **识别模式多样化** - 4种模式覆盖核心场景
✅ **界面尺寸匹配** - 390×844px 移动端标准
✅ **信息简洁** - 核心功能集中顶部/底部
✅ **AI交互提示** - 点阵边框 + 高亮标签
✅ **Nothing OS 风格** - 白+黄+墨绿+点阵元素
✅ **快速上手** - 直观操作，无学习成本

---

## 🚀 未来扩展

### 进阶功能
- 多宠物同时识别
- 实时健康评分
- AR 虚拟试穿（项圈、衣服）
- 语音指令拍摄
- 智能相册分类

### 技术升级
- 离线 AI 模型（本地推理）
- 3D 扫描建模
- 视频录制模式
- 慢动作分析
- 夜景增强算法